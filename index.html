<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <h1>Fintech Transaction Management</h1>
    <!--Task 1: Create a simple login form to input the user's name -->
    <div id="login-form">
      <label for="username">Enter Username:</label>
      <input type="text" id="username" />
      <button id="login-btn" onclick="login()">Login</button>
    </div>
    <div>
      <h4 id="username-display"></h4>
    </div>

    <h2>Dafter Transaksi</h2>
    <div id="logged-in" style="display: none">
      <ul id="transaction-list">
        <!--Task 3: Displaythe list of transactions stored in localStorage here-->
      </ul>

      <!--Task 2: Create a form to add new transactions-->
      <div id="transaction-form">
        <label for="amount">Transaction Amount: </label>
        <input type="number" id="amount" placeholder="Enter amount" />
        <button id="add-transaction-btn" onclick="addTransaction()">
          Add Transaction
        </button>
      </div>

      <!--Task 4: Create a logout button to clear session storage-->
      <button id="logout-btn" onclick="logout()">Logout</button>
    </div>

    <script>
      // Task 1: Handle user login and save the username in session storage
      function login() {
        const username = document.getElementById("username").value;
        sessionStorage.setItem("username", username);

        document.getElementById("login-form").style.display = "none";
        document.getElementById("logged-in").style.display = "block";

        document.getElementById("username-display").textContent =
          "Welcome, " + username;
      }

      // Task 2: Handle adding new transactions to localStorage
      transactionList = localStorage.getItem("transactionList")
        ? JSON.parse(localStorage.getItem("transactionList"))
        : [];
      function addTransaction() {
        const amount = document.getElementById("amount").value;
        transactionList.push(
          "ID: " +
            (transactionList.length + 1) +
            ", Jumlah: " +
            amount +
            ", Status: Pending"
        );

        localStorage.setItem(
          "transactionList",
          JSON.stringify(transactionList)
        );

        renderTransaction();
      }

      // Task 3: Display the list of transactions from localStorage when the page is loaded
      function renderTransaction() {
        const transactions = document.getElementById("transaction-list");
        transactions.innerHTML = "";
        let row = "";

        transactionList.forEach((trans) => {
          row += `<li>${trans}</li>`;
        });

        transactions.innerHTML = row;
      }

      renderTransaction();

      // Task 4: Handle user logout and clear session storage and reload the page
      function logout() {
        sessionStorage.removeItem("username");
        localStorage.removeItem("transactionList");

        document.getElementById("login-form").style.display = "block";
        document.getElementById("logged-in").style.display = "none";
        document.getElementById("username-display").style.display = "none";

        document.getElementById("username").value = "";

        renderTransaction();
      }
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
